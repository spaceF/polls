<!DOCTYPE html>

<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ result_polls.name }}</title>
</head>
<body>
    {% if  'error_message' %}
    <h2>{{ error_message }}</h2>
    {% endif %}

    {% if result_polls.active == 0 %}
        <h2>Голосование завершено</h2>
    {% else %}
        <p>Дата окончания голосования {{ result_polls.finish }}</p>
    {% endif %}

    <h3>{{ result_polls.name }}</h3>
        <table>
            <tr>
                <th>Имя</th>
                <th>Фамилия</th>
                <th>Голоса</th>
            </tr>
        {% for person in result_polls.persons_set.all %}
            <tr>
                <th>{{ person.name }}</th>
                <th>{{ person.surname }}</th>
                <th>{{ person.votes }}</th>
            </tr>
        {% endfor %}
        </table>

        <br>
        <a href="{% url 'polls:home'  %}">
            Активные голосования
        </a>

    <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto" class="border"></div>


    <!-- Chartjs libraries -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>




<script>
_categories = {{ person|safe }};
_values = {{ person|safe }};
Highcharts.chart('container', {
	chart: {
		type: 'column'
	},
	title: {
		text: 'Sales in Thousand per Engine Capacity'
	},
	subtitle: {
		text: ''
	},
	xAxis: {
		categories:_categories,
		crosshair: true
	},
	yAxis: {
		min: 0,
		title: {
			text: 'Sales in thousands'
		}
	},
	tooltip: {
		headerFormat: '<span style="font-size:10px">{point.key}</span><table>',
		pointFormat: '<tr><td style="color:{series.color};padding:0">{series.name}: </td>' +
			'<td style="padding:0"><b>{point.y:.1f} mm</b></td></tr>',
			footerFormat: '</table>',
		shared: true,
		useHTML: true
	},
	plotOptions: {
		column: {
			pointPadding: 0.2,
			borderWidth: 0
		}
	},
	series: [{
		name: 'Engine Capacity',
		data: _values

	}]
});

</script>

</body>
</html>

